#1/bin/bash

MOUNT_DIR="/mnt/pressgang/TOPICS"

# cp extended test 1
echo Starting cp test 1

for i in {0..9}
do
   for j in {0..9}
   do
       cp "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml" /tmp
       diff "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml" "/tmp/30${i}${j}.xml"

       if [[ $? -ne 0 ]]
       then
        echo "************ cp extended test 1 failed  ************"
        break
       fi
   done
done

# mv extended test 1
echo Starting mv test 1

for i in {0..9}
do
   for j in {0..9}
   do
       mv "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml" /tmp
   done
done

for i in {0..9}
do
   for j in {0..9}
   do
      if [[ -f "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml" ]]
      then
       echo "************ mv extended test 1 failed  ************"
       break
      fi
   done
done

# touch extended test 1
echo Starting touch test 1

for i in {0..9}
do
   for j in {0..9}
   do
       rm "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml"
   done
done

for i in {0..9}
do
   for j in {0..9}
   do
       touch "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml"
   done
done

for i in {0..9}
do
   for j in {0..9}
   do
      if [[ ! -f "${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30${i}${j}/30${i}${j}.xml" ]]
      then
       echo "************ touch extended test 1 failed  ************"
       break
      fi
   done
done

# tar test 1
echo Starting tar test 1

for i in {0..9}
do
   for j in {0..9}
   do
       FILENAMES="${FILENAMES} \"${MOUNT_DIR}/3/0/${i}/${j}/TOPIC30{i}{j}/30{i}{j}.xml\""
   done
done

tar -C "${MOUNT_DIR}/3/0/0/" -cjf /tmp/tar1.tar.bz2 ${FILENAMES}
